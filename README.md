# blue-code-be-test
This must enable to create a shorter version of a url and when ask for it should be redirected.

### Api Paths

This project has the following paths:

- (GET) localhost:5000/ => running swagger
- (GET) localhost:5000/sh/ => list the most frequent paths limited to 100
- (POST) localhost:5000/sh/ => create new shorter path
- (GET)  localhost:5000/sh/<shorter> => redirect to original path

### Database 

To build the database first you have to run the following command to initialize it:

```sh
flask db init
```

Then you need to create the migrations

```sh
flask db migrate -m shorter
```

After running the above commands, now you have to apply the migration to the database.

```sh
flask db upgrade
```

#### Project dependencies

You have to install de dependencies of the project so use the following command.

```sh
pip install -r requirements.txt
```

### Run the Project 

To run the application you can use the following command

```
python wsgi.py run 
```


### Run the Tests

To run all test of this project you should use the following command

```
python wsgi.py test
```


### Project Structure

```sh
app
├── migrations/ # where the SQLAlchemy store the migrations script to build the database
├── app
│   ├── core/
│   │   ├── __init__.py #nothing inside it
│   │   ├── config.py # has the way to configure flask app for each environment
│   │   └── flask_boilerplate_main.db # sqlite database that store the data
│   ├── short_urls/
│   │   ├── controller.py # class that expose our method enable to list most frequent, create and redirect url
│   │   ├── converter.py # class used to convert the id generated by the database to a shorter url
│   │   ├── dto.py # object that knows how to pass info between the layers
│   │   ├── entity.py  # shorter url entity that is mapped to the database
│   │   ├── service.py # service that capture the data and save it on the database
│   │   ├── tasks.py # background thread that capture the title of the page
│   │   └── __init__.py  #nothing inside it
│   └── __init__.py # has the method to create flask app
├── test/
│   ├── test_config.py # test case to check if the class to create flask app is as expected considering the environment.  
│   └── test_converter.py # test used to test if our convert is working in different scenarios
├── __init__.py # file that create the blueprint and map the routers
└── wsgi.py # script used to start the application or to run tests
```